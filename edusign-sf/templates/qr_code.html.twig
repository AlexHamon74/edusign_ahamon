{% set lessonId = entity.primaryKeyValue %}
<div>
    <img
        src="{{ path('api_lesson_qrcode', { id: lessonId }) }}"
        alt="QR Code"
        class="qr-thumbnail"
        data-qr-src="{{ path('api_lesson_qrcode', { id: lessonId }) }}"
        style="height: 100px; cursor: pointer;" />
</div>

<div id="qrModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%;
    background-color: rgba(0,0,0,0.8); z-index:9999; justify-content: center; align-items: center;">
    <img id="qrModalImg" src="" style="max-width:90%; max-height:90%;" />
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        document.querySelectorAll('.qr-thumbnail').forEach(function (img) {
            img.addEventListener('click', function () {
                const modal = document.getElementById('qrModal');
                const modalImg = document.getElementById('qrModalImg');
                modalImg.src = img.dataset.qrSrc;
                modal.style.display = 'flex';
            });
        });

        document.getElementById('qrModal').addEventListener('click', function (e) {
            if (e.target.id === 'qrModal') {
                e.currentTarget.style.display = 'none';
            }
        });
    });
</script>
